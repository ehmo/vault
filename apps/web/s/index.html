<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Open in Vaultaire</title>
  <meta name="description" content="Someone shared a vault with you. Open this link in Vaultaire to accept the invitation.">
  <meta name="apple-itunes-app" content="app-id=6758529311">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles/site-shared.css">
  <style>
    main {
      flex: 1;
      display: grid;
      place-items: center;
      padding: 116px 16px 48px;
    }

    .invite-card {
      width: min(100%, 620px);
      background: color-mix(in srgb, var(--surface) 94%, transparent 6%);
      border: 1px solid color-mix(in srgb, var(--text) 12%, transparent 88%);
      border-radius: 28px;
      padding: 34px 26px;
      text-align: center;
    }

    .hero-logo {
      width: 74px;
      height: 74px;
      border-radius: 20px;
      margin: 0 auto 18px;
      box-shadow: 0 12px 26px color-mix(in srgb, var(--bg) 75%, transparent 25%);
    }

    h1 {
      margin: 0 0 8px;
      font-family: var(--font-display);
      font-size: clamp(1.6rem, 4vw, 2.2rem);
      letter-spacing: 0.02em;
      line-height: 1.12;
    }

    p {
      margin: 0;
      color: var(--text-secondary);
      line-height: 1.65;
    }

    .stack {
      margin-top: 18px;
      display: grid;
      gap: 12px;
    }

    .cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 9px;
      margin-top: 10px;
      text-decoration: none;
      background: var(--accent);
      color: var(--accent-contrast);
      font-weight: 700;
      padding: 14px 22px;
      border-radius: 999px;
    }

    .cta-open {
      background: transparent;
      color: var(--text);
      border: 1px solid color-mix(in srgb, var(--text) 20%, transparent 80%);
    }

    .hint {
      margin-top: 14px;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    @media (max-width: 768px) {
      main {
        place-items: start center;
        padding-top: 96px;
        padding-bottom: 36px;
      }
      .invite-card { border-radius: 18px; padding: 24px 18px; }
      .cta {
        width: 100%;
      }
      .stack {
        margin-top: 14px;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header>
    <div class="container nav-inner">
      <a href="../index.html" class="logo" aria-label="Vaultaire home">
        <img src="../assets/vault-logo.png" alt="" class="logo-mark logo-mark--dark" loading="lazy" width="32" height="32">
        <img src="../assets/vault-logo-light.png" alt="" class="logo-mark logo-mark--light" loading="lazy" width="32" height="32">
        <span>Vaultaire</span>
      </a>
      <nav class="nav-links" aria-label="Main navigation">
        <a href="../index.html">Home</a>
        <a href="../index.html#features">Features</a>
        <a href="../index.html#how-it-works">How It Works</a>
        <a href="../index.html#security">Security</a>
        <a href="../manifesto/index.html">Manifesto</a>
        <a href="../index.html#faq">FAQ</a>
      </nav>
      <div class="nav-cta">
        <button id="theme-toggle" class="theme-toggle" type="button" aria-label="Switch theme" aria-pressed="false">
          <span class="theme-icon" id="theme-icon">â˜€ï¸Ž</span>
          <span id="theme-label">Light</span>
        </button>
        <a href="https://apps.apple.com/app/vaultaire/id6758529311" class="btn btn-primary btn-nav">Get App</a>
      </div>
    </div>
  </header>

  <main id="main-content">
    <section class="invite-card" id="invite-card" aria-live="polite" aria-atomic="true" role="status">
      <img src="../assets/vault-logo.png" alt="" class="hero-logo" id="hero-logo-dark" loading="lazy" width="74" height="74">
      <img src="../assets/vault-logo-light.png" alt="" class="hero-logo" id="hero-logo-light" style="display:none;" loading="lazy" width="74" height="74">
      <h1>Vault Invitation</h1>
      <p>Someone shared a secure vault with you.</p>
      <div id="fallback" class="stack">
        <p>To accept this invitation, you need the Vaultaire app on your iPhone.</p>
        <a class="cta cta-open" id="open-in-app" href="vaultaire://s" aria-describedby="open-hint">
          <span aria-hidden="true">ðŸ”—</span> Open in Vaultaire
        </a>
        <a class="cta" href="https://apps.apple.com/app/vaultaire/id6758529311" aria-label="Get Vaultaire from the App Store">
          <span aria-hidden="true">ðŸ“±</span> Get Vaultaire
        </a>
        <p class="hint" id="open-hint">Already have the app? Open this link on your iPhone.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-content">
      <div class="footer-brand">
        <h4>Vaultaire</h4>
        <p>&copy; 2026 Wraxle LLC</p>
      </div>
      <div class="footer-links">
        <a href="../index.html">Home</a>
        <a href="../manifesto/index.html">Manifesto</a>
        <a href="../privacy/index.html">Privacy Policy</a>
        <a href="../terms/index.html">Terms of Use</a>
        <a href="../s/index.html">Vault Invite</a>
        <a href="../compare/">Compare</a>
        <a href="mailto:support@vaultaire.app">Support</a>
      </div>
      <div class="footer-compare">
        <a href="../compare/vaultaire-vs-private-photo-vault/">Vaultaire vs Private Photo Vault</a>
        <a href="../compare/vaultaire-vs-keepsafe/">Vaultaire vs Keepsafe</a>
        <a href="../compare/vaultaire-vs-privault/">Vaultaire vs Privault</a>
        <a href="../compare/vaultaire-vs-spv/">Vaultaire vs SPV</a>
        <a href="../compare/vaultaire-vs-secret-photo-album/">Vaultaire vs Secret Photo Album</a>
        <a href="../compare/vaultaire-vs-pv-secret-photo-album/">Vaultaire vs PV Secret Photo Album</a>
        <a href="../compare/vaultaire-vs-calculator-hide-photos/">Vaultaire vs Calculator#</a>
        <a href="../compare/vaultaire-vs-secret-photo-vault/">Vaultaire vs Secret Photo Vault</a>
        <a href="../compare/vaultaire-vs-hide-it-pro/">Vaultaire vs Hide it Pro</a>
        <a href="../compare/vaultaire-vs-safe-lock/">Vaultaire vs Safe Lock</a>
      </div>
    </div>
  </footer>

  <script src="../assets/theme-toggle.js" defer></script>
  <script>
    (function () {
      const darkHero = document.getElementById('hero-logo-dark');
      const lightHero = document.getElementById('hero-logo-light');
      const openInAppButton = document.getElementById('open-in-app');

      function buildUniversalInviteUrl() {
        const url = new URL(window.location.href);
        url.protocol = 'https:';
        url.host = 'vaultaire.app';
        if (url.pathname === '/s/index.html') {
          url.pathname = '/s';
        }
        url.searchParams.set('open_in_app', String(Date.now()));
        return url.toString();
      }

      function buildCustomSchemeInviteUrl() {
        const token = window.location.hash ? window.location.hash.slice(1) : '';
        if (!token) {
          return 'vaultaire://s';
        }
        return 'vaultaire://s?p=' + encodeURIComponent(token) + '#' + token;
      }

      if (openInAppButton) {
        openInAppButton.href = buildCustomSchemeInviteUrl();
        openInAppButton.addEventListener('click', function (event) {
          event.preventDefault();
          const fallbackUrl = buildUniversalInviteUrl();
          const schemeUrl = buildCustomSchemeInviteUrl();

          const onVisibilityChange = function () {
            if (document.visibilityState === 'hidden') {
              clearTimeout(fallbackTimer);
              document.removeEventListener('visibilitychange', onVisibilityChange);
            }
          };

          document.addEventListener('visibilitychange', onVisibilityChange);

          const fallbackTimer = setTimeout(function () {
            document.removeEventListener('visibilitychange', onVisibilityChange);
            if (document.visibilityState === 'visible') {
              window.location.assign(fallbackUrl);
            }
          }, 900);

          window.location.assign(schemeUrl);
        });
      }

      function syncHeroLogo(isDark) {
        darkHero.style.display = isDark ? 'block' : 'none';
        lightHero.style.display = isDark ? 'none' : 'block';
      }

      syncHeroLogo((document.documentElement.dataset.theme || 'dark') === 'dark');
      window.addEventListener('vaultaire-themechange', (event) => {
        syncHeroLogo(Boolean(event.detail && event.detail.isDark));
      });
    })();
  </script>
    <script src="../scripts/mobile-nav.js"></script>
</body>
</html>
