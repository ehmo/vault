appId: app.vaultaire.ios
---
# Flip camera front/back, verify no crash
#
# SIMULATOR LIMITATION: Camera hardware is not available on iOS Simulator.
# All camera UI elements are marked optional because they won't render
# without a real camera. This flow verifies navigation (open camera â†’ dismiss)
# and that the flip action doesn't crash. On a physical device, all elements
# would be visible.
- runFlow: ../helpers/launch_test_mode.yaml

# Open camera entry point from either non-empty or empty vault state
- tapOn:
    id: "vault_add_button"
    optional: true
- tapOn:
    id: "vault_first_files"
    optional: true
- tapOn:
    text: "Take Secure Photo"

# Camera elements are optional on simulator (no real camera)
- assertVisible:
    id: "camera_flip"
    optional: true
- tapOn:
    id: "camera_flip"
    optional: true

# Wait for camera to reconfigure
- waitForAnimationToEnd:
    timeout: 1000

# Flip back
- tapOn:
    id: "camera_flip"
    optional: true

# Dismiss camera
- tapOn:
    id: "camera_cancel"
    optional: true

# Verify return to vault grid
- assertVisible:
    id: "vault_add_button"
    optional: true
